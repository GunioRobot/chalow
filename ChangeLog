2003-06-23 (Mon)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.16:
	公開

	* chalow (parse_entry): 
	<http://oikaze.com/~tamada/Diary/2003-06.html#2003-06-23>

	> tDiary のテーマも使えるようになると見栄えが全然違いますな。
	> ただ、惜しむらくは、* に張られるアンカー。
	> ChangeLog 形式なので、上にどんどん書かれていく。
	> 一日に何回も更新するとアンカーのラベルが変わってしまう。
	> その日に書いたエントリから順番に 1, 2 と付けて欲しい。

	確かに。そうなんですよね。ということで、デフォルトを降順にしました。
	上のアイテムから、5, 4, 3, 2, 1 となります。version 0.15 のように
	昇順にするには、cl.conf で $descending_order_item_num = 0 とすれば
	OK。

	* {chalow,cl.conf}:
	新たな設定項目を追加
	> # item header の先頭の "*" のアンカー番号を降順にするか (1:YES, 0:NO)
	> my $descending_order_item_num = 1;

2003-06-22  YAMASHITA Tatsuo  <yto@nais.to>

	* p:TODO:
	- 日本語コードの選択

	* version 0.15:
	公開

	* README: 
	mod

	* sample/ChangeLog: 
	remove

	* chalow:
	tDiary テーマ適用の調整。各 item を p で囲むようにした。

	* ChangeLog の各部の名称:
	chalow では各部を以下のように呼ぶことにします。
	設定ファイル、CSS、プログラムソースを見るときにご参照下さい。
	[IMG:image/chalow-cl-name-s.gif]

	* 半角スペース連続が消えてしまう問題: 
	pre の代わりに p とか div とかで "white-space: pre; font-family:
	monospace;" と指定する方法は、以下のような「半角スペース連続」表記
	で崩れるという問題がある。item を pre で囲むのはいまいちな感じでは
	あるが、今しばらくはやむを得ない。

	これが...
	> 4       5       6       7       8       9       10
	> ┴───┴───┴───┴───┴───┴───┴
	> - 階層１
	>   - 階層２
	>     - 階層３

	こうなる
	> 4 5 6 7 8 9 10
	> ┴───┴───┴───┴───┴───┴───┴
	> - 階層１
	> - 階層２
	> - 階層３

2003-06-21  YAMASHITA Tatsuo  <yto@nais.to>

	* README:
	tDiary のテーマを使うための設定について。

	* {chalow,cl.conf}: 
	tDiary のセクションアンカーみたいなのを実装。使うには、新設定項目 
	$use_item_anchor を 1 にする。

	> # item header の先頭の "*" にアンカーをつけるか (1:YES, 0:NO)
	> $use_item_anchor = 1;

	$item_header_style の設定で、"* HOGE:" か "* HOGE" にしておく必要
	あり。

	これにともない、okikae() 中の「日付で参照リンク」を修正。
	- item anchor への参照リンクの記述方法の例: [2003-06-21-1]。
	- もちろん今までの [2003-06-21] というのも使える。
	- テスト: [2001-12-13-3] [2001-12-02] [2001-12-08-2](ない)

	* {chalow,cl.conf,sample/diary.css}: 
	- デフォルトの設定として、月ページリスト、日付リストを calendar ク
	  ラスの p で囲む。
	- 一番下に出る chalwo ロゴを p.footer にした。p.footer a で bold 
	  がデフォルト。
	- <p class="adminmenu">: ページトップなどにある自分のホームページ
	  へのリンクなど。
	- デフォルトで、各 item header の先頭の "*" を panchor クラスで囲
	  む → "div.day span.panchor"。 "*" をイメージにもできる。
	  $item_header_style の設定で、"* HOGE:" か "* HOGE" にしておく必
	  要あり。
	
2003-06-20 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* README:
	mod

	* chalow (parse_entry):
	New. ChangeLog 処理のロジックを変更した。
	main -> okikae() という呼び出し関係が、
	main -> parse_entry() -> okikae() に。

	* chalow:
	CSS ファイルをコマンドラインから指定できるようにした。
	いろいろなテーマが簡単に試せる。Ex: --css=hoge.css

	* {sample/diary.css,cl.cong,chalow}: 
	- tDiary の CSS と共通にする作戦: h1 はページタイトルっていうのは
	  決め打ちでも良いと思うが、h2 を日記の各日付のタイトルと決め打ち
	  されていたのでちょっと困った。で、従うことにする。修正。
	- その他いろいろ
	
	* {chalow,cl.conf}:
	新たな設定項目を追加
	> # 表示するとき引用記号 ('>' or '|') を消すか (1:YES, 0:NO)
	> my $remove_quote_mark = 0;
	> # item header に h3 タグを足すか (1:YES, 0:NO) - tDiary との互換性のため
	> my $use_h3_for_item_header = 0;

	change var name: $old_style_item_header --> $item_header_style

	* chalow (okikae): 
	- 引用を blockquote にするようにした。 "div.body blockquote" で指
	  定。

2003-06-19 (Thu)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow:
	ユーザ設定ファイルの読み込み時のエラーを出力するようにした。(use $@)

	* clsearch.cgi:
	- div 囲み entry に対応。
	- clsearch.cgi の検索結果に "前へ" と "次へ" も表示するようにした。

	* chalow: 
	佐藤さんからのフィードバック (030218) を参考に、正しいHTML を出力
	するようにしよう! ... と思ったが途中で挫折。
	- <div align="right"> → <div style="text-align:right">
	- <b> -> <strong>
	- 全体を div で囲む

	* chalow: 
	- tDiary の CSS と共通にする作戦
	  - 各 entry を <div class="day"></div> で囲むようにした。
	  - 各 item を <div class="sectoin"></div> で囲むようにした。
	  - 1 entry 内の複数の item を <div class="body"></div> で囲むよう
	    にした。
	- 全体を pre で囲むのをやめる
	
	* sample/diary.css:
	add new classes

	* {chalow,cl.conf}: 
	新たな設定項目を追加
	> # タブによるインデントをなくすか (1:なくす or 0:そのまま)
	> my $no_indent = 0;
	> # アイテムヘッダーのフォーマットをどうするか (0:"* HOGE:", 1:"HOGE:",2:"HOGE")
	> my $old_style_item_header = 1;
	> # インデックスページの HTML ヘッダに追加したいもの (favicon.ico など)
	> my $index_page_head_plus = "";
	> # 月ページの HTML ヘッダに追加したいもの
	> my $month_page_head_plus = "";

	* chalow (okikae):
	- 日付を h3 タグと date クラスの span で囲むようにした。CSS でいじ
	  りやすくするため。
	- アイテムヘッダーを <span class="clitemheader"></span> で囲むよう
	  にした。
	- URL 変換で、ftp:// も変換するようにした。(ishii-k さんからのフィー
	  ドバック (030616))

2003-06-14  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.14: 公開

	* README: mod

2003-06-12  YAMASHITA Tatsuo  <yto@nais.to>

	* clsearch.cgi: 検索結果で、月ページでトップに表示されるエントリの
	日付が表示されないバグを修正。(ad hoc. 全体的に手を入れなおす必要
	があるかも)

2003-06-11  YAMASHITA Tatsuo  <yto@nais.to>

	* clsearch.cgi: "nkf -e" --> "nkf -ed" (\r\n 問題)

2003-06-09  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (make_month_page_list): 何回も呼び出されても効率に影響な
	いように cache するようにした。
	(write_month_page): MONTHPAGELIST を月ページのテンプレートでも使え
	るようにした。

	* test-add-extent.html: add-extent.pl のテスト用 HTML ファイル。

	* chalow: こっそり作ってた expert-mode を削除。

	* add-extent.pl: New. HTML の img タグに width と height を足すス
	クリプト。これにより、同じことを行う秘密の expert-mode が不要になっ
	た。

2003-05-31  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow: "nkf -e" --> "nkf -ed" (念のため)

2003-05-30 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* {cl.conf,chalow}: ユーザ設定用の変数 $index_page_header,
	$index_page_footer, $month_page_header, $month_page_footer を削除。
	代わりに $index_page_template, $monthd_page_template を追加。

	### obsolete
	my $index_page_header;		# インデックスページのヘッダ
	my $index_page_footer;		# インデックスページのフッタ
	my $month_page_header;		# 月ページのヘッダ
	my $month_page_footer;		# 月ページのフッタ

	* テンプレート方式とは:
	$index_page_template, $monthd_page_template に body 内部の内容を
	「内部置き換え文字列」などを用いて表現する方式。
	カスタマイズ (レイアウト) の自由度を高めるために採用。

	* chalow (make_month_page_list): 
	- change name from write_month_page_list().
	- print --> $rv .= "..."
	(write_month_page): テンプレート方式にする。
	(write_index_page): テンプレート方式にする。

	* 内部置き換え文字列: update 030619. 最新情報は cl.conf を見て!
	- 月ページ用
	  CLNAVI: 先月来月ページへのリンク
	  YEARMONTH: YYYY-MM
	  DAYLIST: 日付リスト
	  DAYSINTHEMONTH: その月の全エントリ

	- インデックスページ用
	  MONTHPAGELIST: 月別一覧
	  LATESTDAYS: 最近 N 日分のエントリ
	  NDAYS: 「最近 N 日分」の N
	  CLLASTUPDATE: 最終更新時間

2003-05-29  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (okikae): 引用 (citation)。
	タブの後に "|" か ">" が来る行は引用とみなし、CSS の clquote クラ
	スな span で囲む。
	<span class="clquote">| ...</span>

	> 引用
	> 引用
	> 引用
		> これは引用ではない

	| 引用
	| 引用
	 | これは引用ではない

	(→[2003-06-20]) <blockquote> に変更 "div.body blockquote" で指定

2003-03-31  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow: 新オプション。処理停止日付 ($stop_date)。この日付まで処
	理する。
	例: --stop-date "2002-01-01"
	未指定なら最後まで処理する

2003-03-13  YAMASHITA Tatsuo  <yto@nais.to>

	* clsearch.cgi: 文字化け対策。 HTTP header
	ref. <http://nais.to/~yto/clog/2002-08.html#2002-08-06>

2003-01-18 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.13: 公開

	* README (usage): clweek.pl についての記述を追加

	* clweek.pl: New.  日付フォーマットを曜日入りのに変換するフィルタ。
	ref.
	<http://namazu.org/~satoru/diary/?200301b&to=200301151S2#200301151S2>
	
	* chalow: 曜日入り日付フォーマットに対応。
	例: 2000-06-12 (Mon)  YAM Tat  <yto@example.com>
	ref. <http://namazu.org/~satoru/diary/?200301b&to=200301151#200301151>

2003-01-05 (Sun)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.12: 公開

	* README: 更新

	* chalow (okikae): キーワードの強調[2002-12-28]の廃止。

	* cl-simple.conf: delete. use "cl.conf"

	* chalow: ChangeLog をパーズするループを書き換える。いじりやすくし
	た。
	(get_last_day_of_month): New. 年月を入力としその月の最終日を出力す
	る関数。
	(write_month_page): 月ページに、日へのリンク (日付一覧) を出せるよ
	うにした。
	(write_month_page): 月ページに、表示する日付の順番を調整できるよう
	にした。降順 or 昇順。今までは、降順だけだった。
	- 月ページで、日付を降順 (新しい日付が上) で表示するか (1:yes or 0:no)
	  $reverse_order_days = 1;

2002-12-28 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (okikae): (030105: 機能廃止。「自動文字列置換」でやっても
	らう方針にした。[[README に解説]]を書いた。以下の記述は obsolete)

	あんまり機能を追加するのは嫌なんだけど、*キーワードの強調*をできる
	ようにした。そのうち変更するかも。

	強調したい文字列を * で囲む。内側のすき間にスペースや記号が入って
	はダメ。
	- 悪い例: こんにちは * ほげぴー * です! いわゆる *よろしく!*

	また、"<" を変換する正規表現を書き換えた。残したいタグをカスタマイ
	ズしやすくなったかな。詳しくはソースを。

2002-12-27 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.11: 公開

	* chalow (write_month_page_list): 月別一覧表示を改造。記述の無い月
	も一覧に表示するようにした。

	- 改造のきっかけは 12/17 の高久さんからのバグ報告メール。12 月の記
	  述がないと次の年が改行されずにつづくというバグ。

2002-11-24 (Sun)  YAMASHITA Tatsuo  <yto@nais.to>

	* sample/diary.css: ちょっと修正。行間をあけたり。

2002-10-29 (Tue)  YAMASHITA Tatsuo  <yto@nais.to>

	* README: 
	URL 改行についての解説を書き忘れていたので書く。

2002-10-26 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.10: 公開

2002-10-25 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (okikae): バックスラッシュを用いたURL中での改行に対応。
	例:
	<http://www.city.kiryu.gunma.jp/web/home.nsf/42fed222e9b38157492\
	568fd002b273a/85a282c6b8dd8ea349256a22002b079b?OpenDocument>

	URL 用正規表現も修正。

2002-10-19 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.9: 公開

2002-10-18 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (okikae): "&" を "&amp;amp;" に置き換えるようにした。
	IEで「&amp;region」が「(R)ion」になってしまったから。

	→でも、やっぱやめた。「;」もないのにエンティティ変換しちゃうのに
	まで対応するのは馬鹿らしい。ハートを出したいときの「&amp;hearts;」
	とかも使えなくなっちゃうし。変になったらその都度「&amp;amp;region」
	みたいにして下さい。

2002-10-01 (Tue)  YAMASHITA Tatsuo  <yto@nais.to>

	* README: 月ページのヘッダとフッタについての記述を追加。

	* cl.conf, sample/cl-sample.conf:
	- 日付の後に曜日(Mon, Tue, ...)を表示するか (1:yes or 0:no)。 
	  $show_day_of_week = 1;
	- 月ページのヘッダ、フッタのデフォルト変更

	* chalow (write_month_page): 月ページ移動ナビ (前後の月ページへの
	リンク) を表示できるようにした。

	* chalow: 日付文字列の後に曜日(Mon, Tue, ...)を追加するようにした。
	また、日付の後に曜日(Mon, Tue, ...)を表示するか否かの切り替えの仕
	組みを追加 (デフォルトは表示する)。

	* chalow (get_day_of_week): New. 年月日を入力とし曜日を出力する関
	数

2002-08-09 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* README: はずかしい間違いをこっそり修正。その他追加。

2002-06-29 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.8: 公開

	* clsearch.cgi: new. パッケージに追加してみた。

	* chalow (okikae): URL 用正規表現を修正。
	s?https?://[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+ →
	s?https?://[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#,]+

	こんな URL があるもんだから。
	http://k-tai.impress.co.jp/cda/article/todays_goods/0,,9722,00.html

2002-06-28 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (get_img_str): add alt. 他にもいろいろ機能ダウン。

2002-06-24 (Mon)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (okikae): "<http://www.example.com/>" といった "<", ">" 
	でくくった URL 表記に対応。修正の手順: 
	(1) "<" と ">" をエスケープしていたのを、 "<" だけにする。
	(2) URL にマッチする正規表現を変更。

2002-06-23 (Sun)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.7: 公開

	* chalow (write_month_page): $month_page_header 中の YEARMONTH と
	いう文字列を、"年-月" 文字列 (例えば、"2002-06") に置き換えるよう
	にした。ad hoc で嫌なんだけど、良い方法が思いつかない...。

2002-06-22 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* diary.css: New. サンプル。taku-ku のをパクる。

	* chalow: chalow 普及のため HTML の一番下に chalow home page への
	リンク表示するようにした。最初からやっておけばよかった...

	* README: 改定

	* chalow: CSS に対応。 $css_file でスタイルシートファイルを指定す
	る。

	* cvs: CVS による管理開始。

2001-12-16 (Sun)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.6: 公開

	* chalow:
	[2001-12-13] にやった「見出しにマッチする正規表現」の調整の続き。
	「s!\t\* ([^:\n]+): !\...」を「s!\t\* ([^:\n]+):(\s)!\...」に変更。
	
	masata-y 氏の意見に従って、「#!/usr/local/bin/perl」を
	「#!/usr/bin/env perl」に変更 (感謝!)。

2001-12-13 (Thu)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.5: 公開

	* README: 手直し。

	* chalow: 落ち着いて考えたら、ユーザ設定ファイルがないと使えない
	[2001-12-04]ってのは、あんまりなので、ソースにデフォルト設定を埋め
	込んだ。ユーザ設定ファイル指定なしだと極めてシンプルな Web ページ
	に変換される (ま、そもそもシンプルだけどね)。

	* chalow (okikae): 項目の見出しに色づけ処理をちょっと変更。見出し
	にマッチする正規表現を「s!\t\* ([^:\n]+):!\...」から
	「s!\t\* ([^:\n]+): !\...」に変更 (コロン後にスペースを追加)。これ
	で、見出しのない項目も安心。

2001-12-09 (Sun)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.4: 公開

2001-12-08 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow: New option '-e'. expert-mode. ソース見て処理内容が分かる
	人向けモード。[2001-12-07]の identify がらみの処理など。README に
	は載せないつもり。
	(write_month_page): Add <meta> in <head>
	(write_index_page): Add <meta> in <head>

2001-12-07 (Fri)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow (get_img_str): 自分用に、ImageMagick の identify で、
	画像の extent を得る処理を付け加えた。identify がなければ何もしな
	い。

	extent が必要な理由: IE で日付参照リンクをクリックすると、きちんと
	その日付のとこに飛ぶ。しかし、しばらくして画像が全部読み込まれてレ
	イアウトしなおされると、飛んだ場所がずれちゃう。結果として、正しい
	日付へジャンプできないことがあるわけ。

	問題点: 変換処理が遅くなる。まあ、しょうがない。いそぐもんじゃない
	からいいかな。

2001-12-04 (Tue)  YAMASHITA Tatsuo  <yto@nais.to>

	* chalow: ユーザ設定ファイル名が存在しないときエラーで中止するよう
	にした。

2001-12-02 (Sun)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.3: 公開

	* README: 手直し。

	* chalow: New option '-q'. quiet mode. 標準出力に進捗情報を出すこ
	とにしたので、quiet mode も作った。

	* ファイル移動: ChangeLog-sample → sample/ChangeLog, 
	cl-simple.conf → sample/cl-simple.conf
	(thanks to satoru-t)

	* version 0.2: 公開してみる。

	* cl-simple.conf: パッケージに追加。README の実行例で使用。

	* chalow:
	- ユーザ設定ファイルを指定する新オプション -c,
	  --configure-file=FILE を追加。
	- 最初にファイルを読み込むときに EUC に変換するのを忘れてたので修
	  正。(version 0.1 では、JIS ファイルだとおかしくなる)

	* README: 誤り訂正。

2001-12-01 (Sat)  YAMASHITA Tatsuo  <yto@nais.to>

	* version 0.1: 公開してみる。Web ページも作る。
	http://nais.to/~yto/tools/chalow/

	* chalow: 軽く手入れ。

	* README: 公開にそなえて README を書き始める。

